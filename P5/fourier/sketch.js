// Function for first canvas
h = 400;
w = 900;

function sketch1(p) {
  let t = 0;
  let wave = [];
  let A = 1;
  let D = 0.5;
  let T = 1;
  let points_t = [];
  let points_y = [];

  let A_n = [
    68.5346699271, 47.3986819556, 43.8147583333, 30.9813647013, 28.7167466537,
    20.6891605882, 15.2129148635, 12.0148439792, 9.4245974587, 7.3164855289,
    5.1715402263, 4.5767122997, 4.1216671452, 3.6061217367, 3.233191484,
    3.2200890887, 2.9425452108, 2.7391970287, 2.7349997357,
  ];
  let f_n = [
    0.0032620408, 0.0016310204, 0.0024465306, 0.004077551, 0.0008155102,
    0.0065240816, 0.0073395918, 0.0057085714, 0.0089706122, 0.0097861224,
    0.0130481633, 0.0163102041, 0.0122326531, 0.0154946939, 0.0203877551,
    0.0146791837, 0.0114171429, 0.0195722449, 0.0228342857,
  ];
  let phi_n = [
    1.9231870307, -1.284380272, 1.5408719136, -1.7131759924, -1.802038261,
    -0.4797023301, 0.9892018239, -0.7119035832, 1.0341808578, 2.2144780377,
    -0.0528781302, 2.4719027416, -2.7713185286, 0.9750084401, 1.2196068981,
    1.7795772842, 0.854529669, -0.2910825333, 1.9678133401,
  ];
  p.setup = function () {
    canvas1 = p.createCanvas(w, h);
    canvas1.parent("#box1");
  };
  p.draw = function () {
    p.translate(200, 200);
    p.background(220);
    let x = 0;
    let y = 0;

    for (let i = 0; i < A_n.length; i += 1) {
      let prevx = x;
      let prevy = y;
      let A = A_n[i];
      let f = f_n[i];
      let phi = phi_n[i];

      let radius = A;

      y += radius * p.sin((2 * p.PI * f * t) / T + phi);
      x += radius * p.cos((2 * p.PI * f * t) / T + phi);

      p.stroke(100, 150);
      p.noFill();
      p.ellipse(prevx, prevy, radius * 2);

      p.stroke(100);
      p.line(prevx, prevy, x, y);
    }

    wave.unshift(y);
    points_t.push(t);
    points_y.push(y);
    p.fill("red");
    p.circle(x, y, 5);

    p.translate(200, 0);
    p.line(x - 200, y, 0, wave[0]);
    p.beginShape();
    p.noFill();
    for (let i = 0; i < wave.length; i++) {
      p.vertex(i, wave[i]);
    }
    p.endShape();

    // t += slider2.value();
    t += 5;

    period = 500;
    if (wave.length > period * 2) {
      wave.pop();
      points_t.pop();
      points_y.pop();
    }
  };
}

// Run first p5 instance
let p1 = new p5(sketch1);

// Function for second canvas
function sketch2(p) {
  let t = 0;
  let wave = [];
  let A = 1;
  let D = 0.5;
  let T = 1;
  let points_t = [];
  let points_y = [];

  let A_n = [
    66.303044514, 44.826897815, 29.201604414, 27.4347881515, 22.0247124906,
    21.1253723063, 17.8833869999, 17.1462371558, 15.7104324979, 11.4363418051,
    10.8000695665, 10.6778759778, 9.7887687456, 8.7503017129, 8.4248434483,
    7.8461534552, 7.8254539832, 6.0889378791, 5.9151271738, 5.8457697875,
    5.7356710464, 4.9640752941, 4.7561046512, 4.1576022692, 4.0908306725,
    3.767133044, 3.4670171844, 3.4426226618, 3.3801678276, 3.1713158441,
    2.7574374307, 2.6236990649, 2.6044484298, 2.5320615229, 2.3721365412,
    2.2673074775, 2.109365354, 2.0304608836, 2.0130921619, 1.7568272955,
    1.2231874042, 1.1160996405, 1.0807797728, 0.8970492682, 0.8632453456,
    0.8594922883, 0.834609689, 0.8273483651, 0.8228129594, 0.7786226692,
    0.7630194591, 0.5618641804, 0.5269687663, 0.5209234951, 0.4275634342,
    0.397923917, 0.3864168837, 0.3426645833, 0.2795244602, 0.2492451765,
    0.2190171512, 0.1816320764, 0.1471992323, 0.1436522027, 0.1250877999,
    0.1234523237, 0.1062808075, 0.0990065491, 0.0940639179, 0.0897794505,
    0.0858082484, 0.084486579, 0.0832396707, 0.0820763819, 0.0785663041,
    0.0752694886, 0.0721766199, 0.0692765169, 0.0665568322, 0.0640048588,
    0.0616081095, 0.0593546695, 0.0572333824, 0.0552339269, 0.0537473366,
    0.0533468276, 0.0515634271, 0.0498758371, 0.049774453, 0.0482768804,
    0.0467600301, 0.0453193494, 0.0439494349, 0.0426453641, 0.0414026469,
    0.0402171823, 0.0390852196, 0.0390655793, 0.0380033229, 0.6098976315,
  ];
  let f_n = [
    9.9836601307, 4.9918300654, 6.9885620915, 7.9869281046, 11.9803921569,
    2.9950980392, 12.9787581699, 19.9673202614, 1.9967320261, 21.9640522876,
    5.9901960784, 8.9852941176, 3.9934640523, 10.9820261438, 17.9705882353,
    22.9624183007, 16.9722222222, 27.954248366, 13.977124183, 26.9558823529,
    29.9509803922, 39.9346405229, 18.9689542484, 49.9183006536, 20.9656862745,
    14.9754901961, 44.9264705882, 15.9738562092, 0.9983660131, 36.9395424837,
    28.9526143791, 46.9232026144, 34.9428104575, 69.885620915, 59.9019607843,
    61.8986928105, 37.9379084967, 47.9215686275, 23.9607843137, 62.8970588235,
    25.9575163399, 35.9411764706, 48.9199346405, 33.9444444444, 38.9362745098,
    45.9248366013, 31.9477124183, 30.9493464052, 32.9460784314, 24.9591503268,
    63.8954248366, 68.887254902, 64.8937908497, 58.9035947712, 65.8921568627,
    67.8888888889, 66.8905228758, 60.9003267974, 57.9052287582, 40.9330065359,
    70.8839869281, 56.9068627451, 43.9281045752, 50.9166666667, 71.8823529412,
    55.908496732, 72.8807189542, 73.8790849673, 74.8774509804, 75.8758169935,
    76.8741830065, 41.931372549, 54.910130719, 77.8725490196, 78.8709150327,
    79.8692810458, 80.8676470588, 81.8660130719, 82.864379085, 83.862745098,
    84.8611111111, 85.8594771242, 86.8578431373, 87.8562091503, 53.9117647059,
    88.8545751634, 89.8529411765, 90.8513071895, 42.9297385621, 91.8496732026,
    92.8480392157, 93.8464052288, 94.8447712418, 95.8431372549, 96.841503268,
    97.839869281, 98.8382352941, 51.9150326797, 99.8366013072, 0.0,
  ];

  let phi_n = [
    0.1831267486, -3.0600087136, 1.4996360624, -1.6518484214, -1.704036513,
    1.34754613, 1.2627289733, -2.245002421, -1.853075721, 0.9510079102,
    1.5048109111, -1.7235831822, 1.3600318071, -1.5195923826, 1.9757803223,
    -2.3934057383, -0.4387420883, -2.3667177589, 1.0489952935, 0.9850399154,
    0.4540288386, -1.7981371605, 1.5144646852, 0.6059883587, 1.169705739,
    0.7574051292, 0.0173035678, 0.2979469703, -2.0476035638, -2.9982675282,
    -2.5158282967, 0.6760879029, -1.2158582327, -0.0586355682, -2.2091333885,
    0.8777227446, 0.2279904603, -2.4231738613, -2.6795768994, -2.3021796189,
    1.4490462956, -2.9049696878, -2.4506556219, -3.1376301027, 0.6055754767,
    0.5069364896, -2.8437751889, -2.7216945933, -2.967970251, 2.8394928411,
    -2.3442184336, -2.8524287359, -2.3934528153, 0.971123442, -2.4548265705,
    -2.6572551074, -2.5370436783, 0.9198787058, 1.0061380365, -1.2190758815,
    -0.6265278936, 1.0421298649, 2.1541043307, 0.490084875, -1.1914962324,
    1.0797150467, -1.5348632532, -1.725836207, -1.8414064102, -1.9180836703,
    -1.9727568977, -0.6499107582, 1.115840762, -2.0139088611, -2.0461789338,
    -2.0722947301, -2.093958006, -2.1122836357, -2.12803228, -2.1417409781,
    -2.1538001038, -2.1645006415, -2.1740642929, -2.1826632544, 1.1300402192,
    -2.1904335717, -2.1974843764, -2.2039044141, 0.8927383577, -2.2097667467,
    -2.2151321999, -2.2200519302, -2.2245693629, -2.2287216765, -2.2325409508,
    -2.2360550672, -2.2392884197, 0.5909072045, -2.2422624835, 3.1415926536,
  ];
  p.setup = function () {
    canvas2 = p.createCanvas(w, h);
    canvas2.parent("#box2");
    slider1 = p.createSlider(1, 100, 5, 1);
    slider1.parent("#box3-col1");
    para = p.createP("number of circles: " + slider1.value()); // Display initial value
    para.parent("#box3-col1");
    para.style("color", "blue"); // Set text color to blue
    para.style("font-size", "16px"); // Set font size
    para.style("marginRight", "16px"); // Set font size

    slider2 = p.createSlider(1, 90, 60, 1);
    slider2.parent("#box3-col2");
    para2 = p.createP("framerate: " + slider2.value());
    para2.parent("#box3-col2");
    para2.style("color", "green");
    para2.style("font-size", "16px");
  };
  p.draw = function () {
    p.frameRate(slider2.value());
    p.background(220);
    para.html("number of circles: " + slider1.value());
    para2.html("framerate: " + p.round(slider2.value(), 4));
    p.translate(700, 200);
    let x = 0;
    let y = 0;

    for (let i = 0; i < slider1.value(); i += 1) {
      let prevx = x;
      let prevy = y;
      let A = A_n[i];
      let f = f_n[i];
      let phi = phi_n[i];

      let radius = A;

      adjusted_phi = phi + p.PI / 2;

      y += radius * p.sin((2 * p.PI * f * t) / T + adjusted_phi);
      x += radius * p.cos((2 * p.PI * f * t) / T + adjusted_phi);

      p.stroke(100, 150);
      p.noFill();
      p.ellipse(prevx, prevy, radius * 2);

      p.stroke(100);
      p.line(prevx, prevy, x, y);
    }

    wave.push([0, y]);
    points_t.push(t);
    points_y.push(y);
    p.fill("red");
    p.circle(x, y, 5);

    p.translate(-200, 0);
    p.line(0, y, x + 200, wave[wave.length - 1][1]);
    p.beginShape();
    p.noFill();
    for (let i = 0; i < wave.length; i++) {
      let cur_x = wave[i][0];
      let cur_y = wave[i][1];
      p.vertex(cur_x, cur_y);
      wave[i][0] -= 1;
    }
    p.endShape();

    // t += slider2.value();
    t += 1;

    period = 500;
    if (wave.length > period * 2) {
      wave.shift();
      points_t.pop();
      points_y.pop();
    }
  };
}

// Run second p5 instance
let p2 = new p5(sketch2);
